<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>MCU Dashboard</title>
    <style type="text/css">
        div {
            clear: left;
        }
    </style>
    
    <link rel="stylesheet" href="static/css/dc.min.css" type="text/css" />
    
    <script type="text/javascript" src="static/js/d3.min.js"></script>
    <script type="text/javascript" src="static/js/crossfilter.min.js"></script>
    <script type="text/javascript" src="static/js/dc.min.js"></script>
    <script type="text/javascript" src="static/js/queue.min.js"></script>
    
</head>

<body>
    
<div>
    <h3> all MCU movies</h3>
    <div id="movie"></div>
</div>

<div>
    <h3> budget for MCU movies</h3>
    <div id="budgetpertitle"></div>
</div>
    
    <script>
   /* queue()
       .defer(d3.csv, "assets/data/Data.csv")
       .await(getMonth);
    https://github.com/elenasacristan/HolidaysYa */
    
    var franchiseData = [
{"title": "Iron Man", "franchise": "Iron Man", "budget": 186e6, "gross": 585e6, "opening weekend": 102e6, "release date": "02/05/2008", "cinemas": 4154},

{"title": "Iron Man II", "franchise": "Iron Man", "budget": 170e6, "gross": 621e6, "opening weekend": 128e6, "release date": "07/05/2010", "cinemas": 4390},

{"title": "Iron Man III", "franchise": "Iron Man", "budget": 200e6, "gross": 1215e6, "opening weekend": 174e6, "release date": "03/05/2013", "cinemas": 4253},

{"title": "Captain America I: The First Avenger", "franchise": "Captain America", "budget": 140e6, "gross": 370e6, "opening weekend": 65e6, "release date": "22/07/2011", "cinemas": 3715}, 

{"title": "Captain America II: The Winter Soldier", "franchise": "Captain America", "budget": 170e6, "gross": 714e6, "opening weekend": 95e6, "release date": "04/4/2014", "cinemas": 3938}, 

{"title": "Captain America III: Civil War", "franchise": "Captain America", "budget": 250e6, "gross": 1140e6, "opening weekend": 176e6, "release date": "06/05/2016", "cinemas": 4226}, 

{"title": "Thor", "franchise": "Thor", "budget": 150e6, "gross": 449e6, "opening weekend": 65e6, "release date": "05/06/2011", "cinemas": 3955}, 

{"title": "Thor II: The Dark World", "franchise": "Thor", "budget": 150e6, "gross": 644e6, "opening weekend": 85e6, "release date": "08/11/2013", "cinemas": 3841}, 

{"title": "Thor III: Ragnarock", "franchise": "Thor", "budget": 180e6, "gross": 846e6, "opening weekend": 122e6, "release date": "03/11/2017", "cinemas": 4080}, 

{"title": "Ant Man", "franchise": "Ant-Man", "budget": 130e6, "gross": 518e6, "opening weekend": 57e6, "release date": "17/07/2015", "cinemas": 3856}, 

{"title": "Ant man II", "franchise": "Ant-Man", "budget": 130e6, "gross": 623e6, "opening weekend": 75e6, "release date": "06/07/2018", "cinemas":  4206}, 

{"title": "The Avengers", "franchise": "Avengers", "budget": 225e6, "gross": 1517e6, "opening weekend": 207e6, "release date": "04/05/2012", "cinemas": 4349}, 

{"title": "Avengers II: Age of Ultron", "franchise": "Avengers", "budget": 330e6, "gross": 1403e6, "opening weekend": 191e6, "release date": "01/05/2015", "cinemas": 4276}, 

{"title": "Avengers III: Infinity War", "franchise": "Avengers", "budget": 300e6, "gross": 2048e6, "opening weekend": 257e6, "release date": "27/04/2018", "cinemas": 4474}, 

{"title": "Avengers IV: Endgame", "franchise": "Avengers", "budget": 356e6, "gross": 2713e6, "opening weekend": 357e6, "release date": "26/04/2019", "cinemas": 4662}, 

{"title": "Guardians of The Galaxy", "franchise": "Guardians of the Galaxy", "budget": 170e6, "gross" : 770e6, "opening weekend": 94e6, "release date": "01/08/2014", "cinemas": 4088}, 

{"title": "Guardians of The Galaxy 2", "franchise": "Guardians of the Galaxy", "budget": 200e6, "gross": 862e6, "opening weekend": 146e6, "release date": "05/05/2017", "cinemas": 4347}, 
        ];
    
    var ndx = crossfilter(franchiseData);
    
    var franchise_dim = ndx.dimension(dc.pluck('franchise'));
    var infinitywargross = franchise_dim.group().reduceSum(dc.pluck('title'));
    
    var total_gross_per_franchise = franchise_dim.group().reduceSum(dc.pluck("gross"));
    
    // var infinitywar"gross" = franchise_dim.group().reduceSum(function (d) {
    //     if (d.title === "Avengers III: Infinity War") {
    //         return +d."gross";
    //     } else {
    //         return 0;
    //     }
    // })
    
    // var endgame"gross" = franchise_dim.group().reduceSum(function (d) {
    //     if (d.title === "Avengers IV: Endgame") {
    //         return +d."gross";
    //     } else {
    //         return 0;
    //     }
    // })
    
    // var avengers"gross" = franchise_dim.group().reduceSum(function (d) {
    //     if (d.title === "The Avengers") {
    //         return +d."gross";
    //     } else {
    //         return 0;
    //     }
    // })
    
    // var ultron"gross" = franchise_dim.group().reduceSum(function (d) {
    //     if (d.title === "Avengers II: Age of Ultron") {
    //         return +d."gross";
    //     } else {
    //         return 0;
    //     }
    // })
    
    // var ant_man"gross" = franchise_dim.group().reduceSum(function (d) {
    //     if (d.title === "Ant Man") {
    //         return +d."gross";
    //     } else {
    //         return 0;
    //     }
    // })
        
        dc.barChart("#movie")
            .width(800)
            .height(500)
            .margins({top: 10, right: 50, bottom: 30, left: 100})
            .dimension(franchise_dim)
            .group(total_gross_per_franchise)
            // .stack(infinitywargross, "Infinity War")
            // .stack(infinitywar"gross", "Infinity War")
            // .stack(endgame"gross", "endgame")
            // .stack(avengers"gross", "avengers")
            // .stack(ultron"gross", "Avengers II: Age of Ultron")
            // .stack(ant_man"gross", "ant man")
            .transitionDuration(500)
            .x(d3.scale.ordinal())
            .xUnits(dc.units.ordinal)
            .xAxisLabel("MCU Franchises (2+ movies)")
            .yAxisLabel("Worldwide gross ($)")
            .yAxis().ticks(7);
        
        var title_dim = ndx.dimension(dc.pluck('title'));
        var budget_per_title = title_dim.group().reduceSum(dc.pluck("budget"));
        
        dc.pieChart("#budgetpertitle")
            .height(300)
            .radius(1500)
            .dimension(title_dim)
            .group(budget_per_title)
            .transitionDuration(1500);
    
    
    dc.renderAll();
    
    </script>

</body>
</html>