<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <title>MCU Dashboard</title>
    
    <link rel="stylesheet" href="static/css/bootstrap.min.css" type="text/css"/>
    <link rel="stylesheet" href="static/css/dc.min.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="static/css/style.css" type="text/css" />
    
    <script type="text/javascript" src="static/js/d3.min.js"></script>
    <script type="text/javascript" src="static/js/crossfilter.min.js"></script>
    <script type="text/javascript" src="static/js/dc.min.js"></script>
    <script type="text/javascript" src="static/js/queue.min.js"></script>
    <script type="text/javascript" src="/static/js/graphs.js"></script>
</head>

<body>

    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
          <div class="container-fluid">
            <div class="navbar-header">
              <a class="navbar-brand" href="#">Marvel Movie Data Dashboard &nbsp <i class="fa fa-area-chart" aria-hidden="true"></i></a>
            </div>
        </div>
    </nav>
    
    <section class="section dashboard-head">
        <div class="container">
            <div class="alert alert-dismissible alert-danger"> 
                <b>This data dashboard provides info regarding Marvel Movie franchises (franchise being 2+ movies).</b> 
                By clicking the charts themselves, or the buttons below, you can compare a variety of Marvel movie data. For example:
                <br>
                <br>
                <i><ul>
                    <li> Which movie had the most cinema screenings between 2011 and 2015? </li>
                    <li> What is the correlation between invidiviual movie performance and subsequent franchise budget growth/decrease? </li>
                </ul></i>
            </div>
            <div class="row">
            <div class="col-xs-6 col-sm-6">
              <div id="franchise-selector"> Franchise Data: &nbsp</div>
            </div>
            <div class="col-xs-12 col-sm-12">
              <div id="title-selector"> Individual Movie Data:&nbsp </div> 
            </div>
        </div>
    </section>
    
    <main>
        <section class="section">
            <div class="container">
                
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Worldwide Gross per Title</h1>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-xs-12 col-sm-6 text-center" id="gross_composite_chart"></div>
                    <div class="col-xs-12 col-sm-6 text-center" id="gross_title"></div>
                </div>
            </div>
        </section>
        
        <section class="section">
            <div class="container">
                
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Worldwide Gross per Franchise</h1>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center" id="gross_movie"></div>
                </div>
            </div>
        </section>
        
        
        
         <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Movie Budget Growth </h1>
                    </div>
                     <div class="col-xs-12 col-sm-12 text-center" id="scatter"></div>
                </div>
            </div>
        </section>
     
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Opening Weekend Gross vs Movie Budget</h1>
                    </div>
                     <div class="col-xs-12 col-sm-12 text-center" id="stacked-chart"></div>
                </div>
            </div>
        </section>
        
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Opening Weekend Gross </h1>
                    </div>
                     <div class="col-xs-12 col-sm-12 text-center" id="weekend"></div>
                </div>
            </div>
        </section>
        
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Budget per Individual Movie </h1>
                    </div>
                     <div class="col-xs-12 col-sm-12 text-center" id="budgetpertitle"></div>
                </div>
            </div>
        </section>
        
        <section class="section">
            <div class="container">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 text-center">
                        <h1> Cinemas per Franchise </h1>
                    </div>
                     <div class="col-xs-12 col-sm-12 text-center" id="cinemas_per_franchise"></div>
                </div>
            </div>
        </section>
    
        
        
    
        
    </main>
    


    
<!--
    <script>
  
    
    
    
    
    /*date formatting*/
    var parseDate = d3.time.format("%d/%m/%Y").parse;
    franchiseData.forEach(function (d){
        d.date = parseDate(d.date);
    });
    
    /*select menu 1*/
    
        
    /* select menu 2 */
    var dim2 = ndx.dimension(dc.pluck('title'));
    var group2 = dim2.group();
        
    dc.selectMenu("#title-selector")
        .dimension(dim2)
        .group(group2);
        
    /*select menu 3*/
    var dim3 = ndx.dimension(dc.pluck('franchise'));
    var group3 = dim3.group();
        
    dc.selectMenu("#title-selector-2")
        .dimension(dim3)
        .multiple(true)
        .group(group3);
    
    /* select menu 4 */
    var dim4 = ndx.dimension(dc.pluck('date'));
    var group4 = dim4.group();
        
    dc.selectMenu("#release-date-selector")
        .dimension(dim4)
        .group(group4);
    
    /*dates*/
    var date_dim = ndx.dimension(dc.pluck('date'));
    
    var min_date = date_dim.bottom(1)[0].date;
    var max_date = date_dim.top(1)[0].date;
    
    /* for budget related scatter graph */
    var budget_dim = ndx.dimension(function (d) {
        return [d.date, d.budget, d.title, d.franchise];
    });
    
    var budget_group = budget_dim.group();
    
    var scatterColors = d3.scale.ordinal()
                .domain(["Iron Man", "Captain America", "Thor", "Ant-Man", "Avengers", "Guardians of the Galaxy"])
                .range(["Tomato", "Orange", "Violet", "green", "SlateBlue", "purple"]);

    /*scatter graph 2*/
    var gross_progress_dim = ndx.dimension(function (d) {
        return [d.date, d.gross];
    });
    var gross_progress_group = gross_progress_dim.group();
    
    /* for franchise related graphs */
    
    
    
    var cinemas_per_franchise = franchise_dim.group().reduceSum(dc.pluck("cinemas"));
    var budget_per_franchise = franchise_dim.group().reduceSum(dc.pluck("budget"));
    
    /* for title related graphs */
    var title_dim = ndx.dimension(dc.pluck('title'));
    
    var gross_per_title = title_dim.group().reduceSum(dc.pluck("gross"));
    var budget_per_title = title_dim.group().reduceSum(dc.pluck("budget"));
    var weekend_gross_title = title_dim.group().reduceSum(dc.pluck('opening'));
    
    /* opening */
    var weekend_gross = date_dim.group().reduceSum(dc.pluck('opening'));
    
    /*budget stacked graph*/
    
    var movieBudget = title_dim.group().reduceSum(function (d) {
          if (d.title === "Avengers IV: Endgame") {
                 return +d.budget;
             } else if (d.title === "Avengers I") {
                 return +d.budget;
             } else if (d.title === "Avengers III: Infinity War") {
                 return +d.budget;
             } else if (d.title === "Iron Man") {
                 return +d.budget;
             } else if (d.title === "Iron Man II") {
                 return +d.budget;
             } else if (d.title === "Iron Man III") {
                 return +d.budget;
             } else if (d.title === "Guardians of The Galaxy 2") {
                 return +d.budget;
             } else if (d.title === "Guardians of The Galaxy") {
                 return +d.budget;
             } else if (d.title === "Thor") {
                 return +d.budget;
             } else if (d.title === "Thor II: The Dark World") {
                 return +d.budget;
             } else if (d.title === "Thor III: Ragnarock") {
                 return +d.budget;
             } else if (d.title === "Captain America I: The First Avenger") {
                 return +d.budget;
             } else if (d.title === "Captain America II: The Winter Soldier") {
                 return +d.budget;
             } else if (d.title === "Captain America III: Civil War") {
                 return +d.budget;
             } else if (d.title === "Ant Man") {
                 return +d.budget;
             } else if (d.title === "Ant Man II") {
                 return +d.budget;
             } else if (d.title === "Avengers II: Age of Ultron") {
                 return +d.budget;
             } else {
                 return 0;
             }
         });
    
    /*CHARTS*/
    
    var stackedChart = dc.barChart("#stacked-chart");
    stackedChart
        .width(1200)
        .height(500)
        .margins({top: 50, right: 50, bottom: 150, left: 80})
        .dimension(title_dim)
        .group(movieBudget, "Movie Budget")
        .title(function (d) {
                return "$" + d.value;
            })
        .stack(weekend_gross_title, "Movie Opening Weekend Gross")
        .x(d3.scale.ordinal())
        .xUnits(dc.units.ordinal)
        .yAxisLabel("Opening Weekend Gross ($)")
        .legend(dc.legend().x(130).y(0).itemHeight(15).gap(5));
    
        
            
            dc.barChart("#cinemas_per_franchise")
            .width(800)
            .height(400)
            .margins({top: 10, right: 50, bottom: 50, left: 60})
            .dimension(franchise_dim)
            .group(cinemas_per_franchise)
            .transitionDuration(500)
            .title(function (d) {
                return d.key + " was shown in " + d.value + " cinemas";
            })
            .x(d3.scale.ordinal())
            .xUnits(dc.units.ordinal)
            .xAxisLabel("MCU Franchises (2+ movies)")
            .yAxisLabel("Number of Cinemas")
            .yAxis().ticks(4);
        
        dc.pieChart("#gross_title")
            .height(300)
            .radius(1500)
            .dimension(title_dim)
            .group(gross_per_title)
            .title(function (d) {
                return d.key + ", had a worldwide gross of $" + d.value;
            })
            .transitionDuration(1500);
        
        dc.pieChart("#budgetpertitle")
            .height(300)
            .radius(1500)
            .dimension(title_dim)
            .title(function (d) {
                return d.key + ", had a budget of $" + d.value;
            })
            .group(budget_per_title)
            .transitionDuration(1500);
        
        var budget_chart = dc.scatterPlot("#scatter");
        budget_chart 
            .width(700)
            .height(400)
            .x(d3.time.scale().domain([min_date, max_date]))
            .brushOn(false)
            .symbolSize(8)
            .clipPadding(10)
            .xAxisLabel("Release Date of MCU Movies")
            .yAxisLabel("Budget Spent (USD $)")
            .title(function (d) {
                return d.key[2] + ", had a budget of $" + d.key[1];
            })
            .colorAccessor(function(d) {
                return d.key[3];
            })
            .colors(scatterColors)
            .dimension(budget_dim)
            .group(budget_group)
            .margins({top: 10, right: 50, bottom: 75, left: 105});
            
        dc.lineChart("#weekend")
            .width(1100)
            .height(400)
            .margins({top: 10, right: 50, bottom: 40, left: 110})
            .dimension(date_dim)
            .group(weekend_gross)
            .transitionDuration(500)
            .x(d3.time.scale().domain([min_date, max_date]))
            .xAxisLabel("MCU Movie Release Dates")
            .yAxisLabel("Opening Weekend Gross (USD $)")
            .yAxis().ticks(7);
            
            /*composite graph**/
            var ironManFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Iron Man") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var captainAmericaFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Captain America") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var avengersFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Avengers") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var thorFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Thor") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var antManFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Ant-Man") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var guardiansFranchiseGross = date_dim.group().reduceSum(function (d){
                if (d.franchise === "Guardians of the Galaxy") {
                    return +d.gross;
                } else {
                    return 0;
                }
            });
            
            var compositeChart = dc.compositeChart('#gross_composite_chart');
            compositeChart
                .width(650)
                .height(300)
                .dimension(date_dim)
                .margins({top: 10, right: 50, bottom: 40, left: 110})
                .x(d3.time.scale().domain([min_date, max_date]))
                .yAxisLabel("Worldwide Gross (USD $)")
                .title(function (d) {
                return "Movie had a worldwide gross of $" + d.value;})
                .legend(dc.legend().x(130).y(20).itemHeight(13).gap(5))
                .renderHorizontalGridLines(true)
                .compose([
                    dc.lineChart(compositeChart)
                        .colors('red')
                        .group(ironManFranchiseGross, "Iron Man"),
                    dc.lineChart(compositeChart)
                        .colors('blue')
                        .group(captainAmericaFranchiseGross, "Captain America"),
                    dc.lineChart(compositeChart)
                        .colors('green')
                        .group(avengersFranchiseGross, "Avengers"),
                    dc.lineChart(compositeChart)
                        .colors('orange')
                        .group(thorFranchiseGross, "Thor"),
                    dc.lineChart(compositeChart)
                        .colors('black')
                        .group(antManFranchiseGross, "Ant-Man"),
                    dc.lineChart(compositeChart)
                        .colors('purple')
                        .group(guardiansFranchiseGross, "Guardians of the Galaxy")
                    ])
                    .brushOn(false);
   
            

    dc.renderAll();
    
    
    </script>
    -->
   
</body>
</html>